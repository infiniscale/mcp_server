# ============================================
# MCP Convert Router 环境变量配置模板
# ============================================
# 使用方式：
# 1) 复制一份：cp .env.template .env
# 2) 按需修改 .env 中的配置
# 3) 在启动 MCP Server 前加载环境变量

# ============================================
# Transport 配置
# ============================================
# MCP Transport 模式：stdio（命令行）/ sse（服务器发送事件）/ streamable_http（HTTP）
# OpenWebUI 集成必须使用 streamable_http
MCP_CONVERT_TRANSPORT=stdio

# HTTP 服务配置（仅 streamable_http 模式）
MCP_CONVERT_HOST=0.0.0.0
MCP_CONVERT_PORT=25081

# ============================================
# URL 下载配置（OpenWebUI 集成必需）
# ============================================
# ⭐ OpenWebUI 基础 URL（用于自动拼接文件下载 URL）
# 示例：http://192.168.1.236:22030 或 https://openwebui.example.com
OPENWEBUI_BASE_URL=http://192.168.1.236:22030

# ⭐ OpenWebUI API Key（可选，用于文件下载认证）
# 在 OpenWebUI → Settings → Account → API Keys 中生成
# 留空则不添加认证头（适用于内网部署）
OPENWEBUI_API_KEY=

# ⭐ URL 主机白名单（逗号分隔，绕过 SSRF 检查）
# 用于允许访问内网地址（如 OpenWebUI 服务器）
# 示例：openwebui,192.168.1.100,localhost,your-domain.com
MCP_CONVERT_ALLOWED_URL_HOSTS=

# TLS 证书验证（默认 true）
# 设为 false 跳过证书验证（仅用于内网自签名证书）
MCP_CONVERT_URL_TLS_VERIFY=true

# ============================================
# 文件处理配置
# ============================================
# 最大文件大小（MB）
MCP_CONVERT_MAX_FILE_MB=50

# 临时工作目录（每次请求会创建子目录）
MCP_CONVERT_TEMP_DIR=/tmp/mcp-convert

# 临时目录保留时间（小时），超时自动清理
MCP_CONVERT_RETENTION_HOURS=24

# croc 接收超时（秒）
MCP_CONVERT_CROC_TIMEOUT_SECONDS=120

# ============================================
# 输入安全限制
# ============================================
# 允许本地 file_path 输入的根目录白名单（逗号分隔）
# 示例：/Users/username/Documents,/data/uploads
MCP_CONVERT_ALLOWED_INPUT_ROOTS=

# 是否强制要求必须配置白名单（true/false）
MCP_CONVERT_REQUIRE_ALLOWLIST=true

# ============================================
# 日志配置
# ============================================
# 日志等级：DEBUG / INFO / WARNING / ERROR
MCP_CONVERT_LOG_LEVEL=INFO

# ============================================
# MinerU 配置（文档转换引擎）
# ============================================
# MinerU API 类型：远程（云服务）或本地部署
# 云服务配置
MINERU_API_BASE=https://mineru.net
MINERU_API_KEY=

# 本地服务配置
USE_LOCAL_API=false
LOCAL_MINERU_API_BASE=http://localhost:8080

# MinerU 超时设置
MINERU_TIMEOUT=300
MINERU_POLL_INTERVAL_SECONDS=5

# MinerU 结果 zip 最大下载大小（字节）
MINERU_MAX_RESULT_ZIP_BYTES=209715200

# ============================================
# OpenWebUI 集成示例配置
# ============================================
# 快速开始 - OpenWebUI 集成所需的最小配置：
#
# MCP_CONVERT_TRANSPORT=streamable_http
# MCP_CONVERT_PORT=25081
# MCP_CONVERT_HOST=0.0.0.0
# MCP_CONVERT_ALLOWED_URL_HOSTS=openwebui,192.168.1.100,localhost
# MCP_CONVERT_URL_TLS_VERIFY=false  # 如果使用自签名证书
# MINERU_API_KEY=your-api-key
#
# 详细配置说明请参考：docs/openwebui/README.md
